<!DOCTYPE html>
<html>
<head>
    <style>
        @font-face {font-family: Calibri; src: url(calibril.ttf);}
        @font-face {font-family: Times New Roman; src: url(timesbd.tff);}
    </style>
</head>
<body style="background-color: #f0eded;background-image: url(blizzard.png);">
   <div align="center"style="padding: 50px; margin: auto; width: 600px;">
   	<div>
   		<img src="wup.png">
   	</div>
    <form>
     Name: <br><input id="iname" type="text" name="nname1"><br><br>
     Title: <br><input id="ntitle" type="text" name="ntitle1"><br><br>
     <input id="bTn1" type="button" name="btn" onclick="LImg();" value="Transparent">
     <input id="bTn2" type="button" name="btn" onclick="WLImg();" value="White">
     <input id="bTn3" type="button" name="btn" onclick="rVal();" value="Clear fields">
     <input style="font-weight: bold; font-style: italic; letter-spacing: 1px;" id="bTn4" type="button" name="btn" value="Save as">

 </form>
 <br> <br> <div style="border-style: solid; border-width: 2px; background-image: url(bg.png); width: 600px; height: 185px;">
    <canvas id="canvas" width="600" height="185" style="text-align: center;"></canvas>
    </div>
<!--     <div style="width: 560px; height: 315px; padding: 25px; padding-top: 100px; position: absolute;">
    	<iframe width="560" height="315" src="https://www.youtube.com/embed/uRf3EMSb8oI" frameborder="0" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

    </div> -->
</div>
    <script>
        var cVas = document.getElementById('canvas');
        var cuntext = cVas.getContext('2d');
        var whiteBg = new Image(600, 185);
        var theImg = new Image(600, 185);
        document.getElementById("bTn4").disabled = true;
        // var dummyImg = new Image(600, 185);

        function LImg() {
            cuntext.clearRect(0, 0, canvas.width, canvas.height);
            cuntext.drawImage(theImg, 0, 0);
            cuntext.fillStyle = '#000';
            cuntext.textAlign = "center"; 
            cuntext.font = 'bold 17px Times New Roman';
            var ctext = document.getElementById('iname').value.split("").join(String.fromCharCode(8202));
            cuntext.fillText(/*document.getElementById('iname').value*/ctext, 120, 114);
            cuntext.textAlign = "center"; 
            cuntext.font = '12px Calibri';
            cuntext.fillText(document.getElementById('ntitle').value, 120, 128);
	    document.getElementById("bTn4").disabled = false;	    

        };
        function WLImg() {
            cuntext.clearRect(0, 0, canvas.width, canvas.height);
            cuntext.drawImage(whiteBg, 0, 0);
            cuntext.drawImage(theImg, 0, 0);
            cuntext.fillStyle = '#000';
            cuntext.textAlign = "center"; 
            cuntext.font = 'bold 17px Times New Roman';
            var ctext = document.getElementById('iname').value.split("").join(String.fromCharCode(8202));
            cuntext.fillText(/*document.getElementById('iname').value*/ctext, 120, 114);
            cuntext.textAlign = "center"; 
            cuntext.font = '12px Calibri';
            cuntext.fillText(document.getElementById('ntitle').value, 120, 128);
	    document.getElementById("bTn4").disabled = false;	    

        };
        function rVal() {document.getElementById('iname').value = ""; document.getElementById('ntitle').value = "";} 

		    const bTn4 = document.querySelector("#bTn4");
		    const imgConv = document.querySelector("#imgConv");
		    const canvas = document.querySelector("#canvas");
		    const dataURI = canvas.toDataURL();
		    bTn4.addEventListener("click", function() {
		    	if(window.navigator.msSaveBlob) {
		    		window.navigator.msSaveBlob(canvas.msToBlob(), "Canvas.png");
		    	} else {
		    	        const a = document.createElement("a");

		    	        document.body.appendChild(a);
		    	        a.href = canvas.toDataURL();
		    	        a.download = document.getElementById('iname').value + " " + document.getElementById('ntitle').value + ".png";
		    	        a.click();
		    	        document.body.removeChild(a);
		    	}
		    });
		
        theImg.src = 'tempL.png';
        whiteBg.src = 'whiteBack.png'; 
        // dummyImg.src = 'dummo2.png';

    </script>
    <script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
</body>
</html>